<%- include('includes/head.ejs') %>
<link rel="stylesheet" href="/css/content/login.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">
</head>

<body>
<header class="main-header">
    <div id="daily-dash-banner">
        <p>Daily Dash</p>
    </div>
</header>
<div class="login-page">
    <div class="login-area">
        <% if(infoMessage) { %>
            <div class="info-message"><%= infoMessage; %></div>
        <% } %>
        <% if(errorMessage) { %>
            <div class="error-message"><%= errorMessage; %></div>
        <% } %>
        <form action="/password-change/<%= passwordResetToken %>" method="POST">
            <input type="hidden" name="_csrf" value="<%= csrfToken; %>">
            <input type="hidden" name="userId" value="<%= userId; %>">
            <div class="input-container">
                <i class="fa fa-lock icon"></i>
                <input
                        class="<%= errors.find(e => e.param === 'password') ? 'invalid' : '' %>"
                        id="password"
                        type="password"
                        name="password"
                        placeholder="New Password"
                        value="<%= password %>"
                        required
                >
            </div>
            <div class="input-container">
                <i class="fa fa-solid fa-rotate-right icon"></i>
                <input
                        class="<%= errors.find(e => e.param === 'confirm_password') ? 'invalid' : '' %>"
                        id="password-confirm"
                        type="password"
                        name="confirm_password"
                        placeholder="Confirm New Password"
                        value="<%= confirm_password %>"
                        required
                >
            </div>
            <button type="submit">Change Password</button>
        </form>
        <p>Don't want to change the password? <a href="/login">Login</a></p>
    </div>
</div>

<%- include('includes/end.ejs') %>